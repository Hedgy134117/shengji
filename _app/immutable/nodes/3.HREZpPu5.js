import{s as X,n as d}from"../chunks/scheduler.CQ0VQmrD.js";import{S as Y,i as Z,e as k,s as V,t as L,c as b,a as $,d as i,f as w,b as j,k as E,g as y,h as g,j as N,l as z,m as A,n as x,o as T,p as F,q as ee,r as te,u as le,v as ae,w as ne}from"../chunks/index.DRkjVt1f.js";import{e as D,h as se,P as re,G as B}from"../chunks/GameList.Dm-SxhZe.js";import{s as M}from"../chunks/util.DKjqa7M5.js";function K(o,e,s){const l=o.slice();return l[3]=e[s],l[5]=s,l}function O(o,e,s){const l=o.slice();return l[6]=e[s],l}function Q(o,e,s){const l=o.slice();return l[3]=e[s],l[5]=s,l}function R(o){let e,s=o[3].name+"",l;return{c(){e=k("p"),l=L(s),this.h()},l(t){e=b(t,"P",{class:!0});var a=$(e);l=j(a,s),a.forEach(i),this.h()},h(){E(e,"class","player-name win-"+o[2][o[5]]+" svelte-16ca1ev")},m(t,a){y(t,e,a),g(e,l)},p(t,a){a&1&&s!==(s=t[3].name+"")&&N(l,s)},d(t){t&&i(e)}}}function U(o){let e,s=M(o[6][0])+"",l,t;return{c(){e=k("p"),l=L(s),t=V(),this.h()},l(a){e=b(a,"P",{class:!0});var c=$(e);l=j(c,s),t=w(c),c.forEach(i),this.h()},h(){E(e,"class","svelte-16ca1ev"),A(e,"staged",o[6][1])},m(a,c){y(a,e,c),g(e,l),g(e,t)},p:d,d(a){a&&i(e)}}}function W(o){let e,s=M(o[0].scores[o[5]])+"",l;return{c(){e=k("p"),l=L(s),this.h()},l(t){e=b(t,"P",{class:!0});var a=$(e);l=j(a,s),a.forEach(i),this.h()},h(){E(e,"class","svelte-16ca1ev"),A(e,"staged",o[0].staged[o[5]])},m(t,a){y(t,e,a),g(e,l)},p(t,a){a&1&&s!==(s=M(t[0].scores[t[5]])+"")&&N(l,s),a&1&&A(e,"staged",t[0].staged[t[5]])},d(t){t&&i(e)}}}function oe(o){let e,s,l,t,a,c,f,P,C=o[0].date.toDateString()+"",G,S=D(o[0].players),u=[];for(let r=0;r<S.length;r+=1)u[r]=R(Q(o,S,r));let I=D(o[1]),_=[];for(let r=0;r<I.length;r+=1)_[r]=U(O(o,I,r));let q=D(o[0].players),m=[];for(let r=0;r<q.length;r+=1)m[r]=W(K(o,q,r));return{c(){e=k("div"),s=k("div");for(let r=0;r<u.length;r+=1)u[r].c();l=V(),t=k("div");for(let r=0;r<_.length;r+=1)_[r].c();a=V(),c=k("div");for(let r=0;r<m.length;r+=1)m[r].c();f=V(),P=k("p"),G=L(C),this.h()},l(r){e=b(r,"DIV",{class:!0});var h=$(e);s=b(h,"DIV",{class:!0});var n=$(s);for(let p=0;p<u.length;p+=1)u[p].l(n);n.forEach(i),l=w(h),t=b(h,"DIV",{class:!0});var v=$(t);for(let p=0;p<_.length;p+=1)_[p].l(v);v.forEach(i),a=w(h),c=b(h,"DIV",{class:!0});var H=$(c);for(let p=0;p<m.length;p+=1)m[p].l(H);H.forEach(i),f=w(h),P=b(h,"P",{class:!0});var J=$(P);G=j(J,C),J.forEach(i),h.forEach(i),this.h()},h(){E(s,"class","equal-fill players svelte-16ca1ev"),E(t,"class","equal-fill prev-scores svelte-16ca1ev"),E(c,"class","equal-fill post-scores svelte-16ca1ev"),E(P,"class","date svelte-16ca1ev"),E(e,"class","game svelte-16ca1ev")},m(r,h){y(r,e,h),g(e,s);for(let n=0;n<u.length;n+=1)u[n]&&u[n].m(s,null);g(e,l),g(e,t);for(let n=0;n<_.length;n+=1)_[n]&&_[n].m(t,null);g(e,a),g(e,c);for(let n=0;n<m.length;n+=1)m[n]&&m[n].m(c,null);g(e,f),g(e,P),g(P,G)},p(r,[h]){if(h&5){S=D(r[0].players);let n;for(n=0;n<S.length;n+=1){const v=Q(r,S,n);u[n]?u[n].p(v,h):(u[n]=R(v),u[n].c(),u[n].m(s,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=S.length}if(h&2){I=D(r[1]);let n;for(n=0;n<I.length;n+=1){const v=O(r,I,n);_[n]?_[n].p(v,h):(_[n]=U(v),_[n].c(),_[n].m(t,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=I.length}if(h&1){q=D(r[0].players);let n;for(n=0;n<q.length;n+=1){const v=K(r,q,n);m[n]?m[n].p(v,h):(m[n]=W(v),m[n].c(),m[n].m(c,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=q.length}h&1&&C!==(C=r[0].date.toDateString()+"")&&N(G,C)},i:d,o:d,d(r){r&&i(e),z(u,r),z(_,r),z(m,r)}}}function ce(o,e,s){let{game:l}=e,t=[];for(let c of l.players)t.push(l.getPlayerPreviousScoreStage(c));let a=l.getScoreDifference();return o.$$set=c=>{"game"in c&&s(0,l=c.game)},[l,t,a]}class ie extends Y{constructor(e){super(),Z(this,e,ce,oe,X,{game:0})}}function he(o,e,s){const l=o.slice();return l[2]=e[s],l}function fe(o){return{c:d,l:d,m:d,i:d,o:d,d}}function ue(o){let e,s,l=D(B.games.reverse()),t=[];for(let a=0;a<l.length;a+=1)t[a]=_e(he(o,l,a));return{c(){e=k("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var c=$(e);for(let f=0;f<t.length;f+=1)t[f].l(c);c.forEach(i),this.h()},h(){E(e,"class","game-list")},m(a,c){y(a,e,c);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},i(a){if(!s){for(let c=0;c<l.length;c+=1)T(t[c]);s=!0}},o(a){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)F(t[c]);s=!1},d(a){a&&i(e),z(t,a)}}}function _e(o){let e,s;return e=new ie({props:{game:o[2]}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,t){le(e,l,t),s=!0},p:d,i(l){s||(T(e.$$.fragment,l),s=!0)},o(l){F(e.$$.fragment,l),s=!1},d(l){ae(e,l)}}}function me(o){let e,s="Loading Data";return{c(){e=k("p"),e.textContent=s},l(l){e=b(l,"P",{"data-svelte-h":!0}),ne(e)!=="svelte-14rifgg"&&(e.textContent=s)},m(l,t){y(l,e,t)},i:d,o:d,d(l){l&&i(e)}}}function ge(o){let e,s,l,t={ctx:o,current:null,token:null,hasCatch:!1,pending:me,then:ue,catch:fe,blocks:[,,,]};return se(o[0](),t),{c(){e=V(),s=k("main"),t.block.c(),this.h()},l(a){x("svelte-vimel9",document.head).forEach(i),e=w(a),s=b(a,"MAIN",{});var f=$(s);t.block.l(f),f.forEach(i),this.h()},h(){document.title="shengji games"},m(a,c){y(a,e,c),y(a,s,c),t.block.m(s,t.anchor=null),t.mount=()=>s,t.anchor=null,l=!0},p(a,[c]){o=a},i(a){l||(T(t.block),l=!0)},o(a){for(let c=0;c<3;c+=1){const f=t.blocks[c];F(f)}l=!1},d(a){a&&(i(e),i(s)),t.block.d(),t.token=null,t=null}}}function de(o){async function e(){return await re.initialize(),B.initialize().then(()=>B.games[1])}return[e]}class $e extends Y{constructor(e){super(),Z(this,e,de,ge,X,{})}}export{$e as component};
