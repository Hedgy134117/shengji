import{s as ae,n as m}from"../chunks/scheduler.CQ0VQmrD.js";import{S as re,i as oe,e as d,t as E,s as y,c as g,a as v,b as S,d as f,f as j,k as p,z as te,m as N,g as V,h,j as D,l as ne,n as ie,o as U,p as X,q as ue,r as he,u as fe,v as _e,w as de}from"../chunks/index.BijzvjHs.js";import{s as I,e as Q,h as ge,P as ce,G as pe}from"../chunks/GameList.BDUEDMgK.js";function le(o,e,a){const t=o.slice();return t[1]=e[a],t}function se(o){let e,a=I(o[1][0])+"",t,l;return{c(){e=d("p"),t=E(a),l=y(),this.h()},l(s){e=g(s,"P",{class:!0});var r=v(e);t=S(r,a),l=j(r),r.forEach(f),this.h()},h(){p(e,"class","score svelte-18aedjc"),N(e,"score__staged",o[1][1])},m(s,r){V(s,e,r),h(e,t),h(e,l)},p(s,r){r&1&&a!==(a=I(s[1][0])+"")&&D(t,a),r&1&&N(e,"score__staged",s[1][1])},d(s){s&&f(e)}}}function ve(o){let e,a,t=o[0].name+"",l,s,r,c,q=I(o[0].getScore())+"",M,O,$,T,z,w=I(o[0].start)+"",B,F,P,G=Math.round(o[0].getProgress()*100)+"",R,H,L=o[0].getPrestige()+1+"",W,J,k,x,C=Q(o[0].getScoresWithStaged().reverse()),_=[];for(let n=0;n<C.length;n+=1)_[n]=se(le(o,C,n));return{c(){e=d("div"),a=d("p"),l=E(t),s=y(),r=d("div"),c=d("p"),M=E(q),O=y(),$=d("div");for(let n=0;n<_.length;n+=1)_[n].c();T=y(),z=d("p"),B=E(w),F=y(),P=d("p"),R=E(G),H=E("% to P"),W=E(L),J=y(),k=d("progress"),this.h()},l(n){e=g(n,"DIV",{class:!0});var i=v(e);a=g(i,"P",{class:!0,style:!0});var u=v(a);l=S(u,t),u.forEach(f),s=j(i),r=g(i,"DIV",{class:!0});var b=v(r);c=g(b,"P",{class:!0});var Y=v(c);M=S(Y,q),Y.forEach(f),O=j(b),$=g(b,"DIV",{class:!0});var Z=v($);for(let K=0;K<_.length;K+=1)_[K].l(Z);Z.forEach(f),T=j(b),z=g(b,"P",{class:!0});var ee=v(z);B=S(ee,w),ee.forEach(f),b.forEach(f),F=j(i),P=g(i,"P",{class:!0});var A=v(P);R=S(A,G),H=S(A,"% to P"),W=S(A,L),A.forEach(f),J=j(i),k=g(i,"PROGRESS",{max:!0,class:!0}),v(k).forEach(f),i.forEach(f),this.h()},h(){p(a,"class","player-name svelte-18aedjc"),te(a,"border",o[0].getPrestige()+"px solid var(--accent-color)"),p(c,"class","score score__curent svelte-18aedjc"),N(c,"score__staged",o[0].isStaged()),p($,"class","score-list svelte-18aedjc"),p(z,"class","score score__start svelte-18aedjc"),p(r,"class","scores svelte-18aedjc"),p(P,"class","prestige svelte-18aedjc"),k.value=x=o[0].getProgress(),p(k,"max","1"),p(k,"class","svelte-18aedjc"),p(e,"class","player-box svelte-18aedjc")},m(n,i){V(n,e,i),h(e,a),h(a,l),h(e,s),h(e,r),h(r,c),h(c,M),h(r,O),h(r,$);for(let u=0;u<_.length;u+=1)_[u]&&_[u].m($,null);h(r,T),h(r,z),h(z,B),h(e,F),h(e,P),h(P,R),h(P,H),h(P,W),h(e,J),h(e,k)},p(n,[i]){if(i&1&&t!==(t=n[0].name+"")&&D(l,t),i&1&&te(a,"border",n[0].getPrestige()+"px solid var(--accent-color)"),i&1&&q!==(q=I(n[0].getScore())+"")&&D(M,q),i&1&&N(c,"score__staged",n[0].isStaged()),i&1){C=Q(n[0].getScoresWithStaged().reverse());let u;for(u=0;u<C.length;u+=1){const b=le(n,C,u);_[u]?_[u].p(b,i):(_[u]=se(b),_[u].c(),_[u].m($,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=C.length}i&1&&w!==(w=I(n[0].start)+"")&&D(B,w),i&1&&G!==(G=Math.round(n[0].getProgress()*100)+"")&&D(R,G),i&1&&L!==(L=n[0].getPrestige()+1+"")&&D(W,L),i&1&&x!==(x=n[0].getProgress())&&(k.value=x)},i:m,o:m,d(n){n&&f(e),ne(_,n)}}}function me(o,e,a){let{player:t}=e;return o.$$set=l=>{"player"in l&&a(0,t=l.player)},[t]}class be extends re{constructor(e){super(),oe(this,e,me,ve,ae,{player:0})}}function Pe(o,e,a){const t=o.slice();return t[1]=e[a],t}function ke(o){return{c:m,l:m,m,i:m,o:m,d:m}}function $e(o){let e,a,t=Q(ce.players),l=[];for(let s=0;s<t.length;s+=1)l[s]=Ee(Pe(o,t,s));return{c(){e=d("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=g(s,"DIV",{class:!0});var r=v(e);for(let c=0;c<l.length;c+=1)l[c].l(r);r.forEach(f),this.h()},h(){p(e,"class","player-box-list")},m(s,r){V(s,e,r);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);a=!0},i(s){if(!a){for(let r=0;r<t.length;r+=1)U(l[r]);a=!0}},o(s){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)X(l[r]);a=!1},d(s){s&&f(e),ne(l,s)}}}function Ee(o){let e,a;return e=new be({props:{player:o[1]}}),{c(){ue(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,l){fe(e,t,l),a=!0},p:m,i(t){a||(U(e.$$.fragment,t),a=!0)},o(t){X(e.$$.fragment,t),a=!1},d(t){_e(e,t)}}}function Se(o){let e,a="Loading Data";return{c(){e=d("p"),e.textContent=a},l(t){e=g(t,"P",{"data-svelte-h":!0}),de(e)!=="svelte-14rifgg"&&(e.textContent=a)},m(t,l){V(t,e,l)},i:m,o:m,d(t){t&&f(e)}}}function ye(o){let e,a,t,l={ctx:o,current:null,token:null,hasCatch:!1,pending:Se,then:$e,catch:ke,blocks:[,,,]};return ge(o[0](),l),{c(){e=y(),a=d("main"),l.block.c(),this.h()},l(s){ie("svelte-1q4z6de",document.head).forEach(f),e=j(s),a=g(s,"MAIN",{});var c=v(a);l.block.l(c),c.forEach(f),this.h()},h(){document.title="shengji players"},m(s,r){V(s,e,r),V(s,a,r),l.block.m(a,l.anchor=null),l.mount=()=>a,l.anchor=null,t=!0},p(s,[r]){o=s},i(s){t||(U(l.block),t=!0)},o(s){for(let r=0;r<3;r+=1){const c=l.blocks[r];X(c)}t=!1},d(s){s&&(f(e),f(a)),l.block.d(),l.token=null,l=null}}}function je(o){async function e(){return await ce.initialize(),pe.initialize()}return[e]}class Ie extends re{constructor(e){super(),oe(this,e,je,ye,ae,{})}}export{Ie as component};
